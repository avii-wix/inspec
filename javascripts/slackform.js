function invite(e,t,n,r){request.post(data.path+"invite").send({coc:t,channel:e,email:n}).end(function(e){if(e.body.redirectUrl){var t=new Error(e.body.msg||"Server error");window.setTimeout(function(){topLevelRedirect(e.body.redirectUrl)},1500)}if(e.error){var t=new Error(e.body.msg||"Server error");return r(t)}r(null,e.body.msg)})}var body=document.body,request=superagent,form=body.querySelector("form#invite"),channel=form.elements.channel||{},email=form.elements.email,coc=form.elements.coc,button=body.querySelector("button");button.className="",body.addEventListener("submit",function(e){e.preventDefault(),button.disabled=!0,button.className="",button.innerHTML="Please Wait",invite(channel?channel.value:null,coc&&coc.checked?1:0,email.value,function(e,t){e?(button.removeAttribute("disabled"),button.className="error",button.innerHTML=e.message):(button.className="success",button.innerHTML=t)})});